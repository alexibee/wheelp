
<%= simple_form_for :search, method: "GET", html: { class: 'mt-3' } do |f| %>
<%= f.input :search_info, placeholder: 'Search by keyword or category', label:false, input_html: {value: ""} %>
<%= f.submit "Search", class: "cta-button", id:"search" %>
<% end %>


<div class="container">
  <% if @services.empty? %>
    <h3> <%= @message %> </h3>
  <% else %>
    <h2> All our wheelpers </h2>
    <% @services.each do |service| %>
      <div class="service-card d-flex align-items-start my-3">
        <div class="left-side">
          <div class="avatar-image">
            <% if service.photo.attached? %>
              <%= cl_image_tag service.photo.key, height: 150, width: 150, crop: :fill %>
            <% else %>
              <img src="https://media.wired.com/photos/5c54ee6a4feec32ca0f590d8/125:94/w_1761,h_1324,c_limit/superman-922909434.jpg" width="150" height="150" />
            <% end %>
          </div>
          <div class="reviews-info">
            <% total = 0 %>
            <% service.bookings.each do |book| %>
              <% total += book.review ? book.review.rating : 0 %>
            <% end %>
            <% if service.bookings.count > 0 %>
              <%= total/service.bookings.count %>
            <% end %>
          </div>
        </div>
        <div class="right-side ps-3">
          <div class="top-right d-flex justify-content-between">
            <h5> <%=service.user.first_name  %> </h5>
            <h6>from Â£<%= service.price %></h6>
          </div>
          <div class="right-middle">
            <p><%= service.title %></p>
          </div>
          <div class="bottom-right d-flex justify-content-between">
            <div class="availability-window">
            <p>Availability</p>
            </div>
            <%= link_to "See more", service_path(service), class:"submit-button" %>
          </div>
        </div>
      </div>
    <% end %>
  <% end %>
</div>
